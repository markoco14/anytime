{% if not current_user %}
<header class="bg-gradient-to-r from-pink-500 to-pink-600 text-white">
{% else %}
<header class="bg-white">
{% endif %}
    <div class="px-2 lg:px-0 h-[48px] flex justify-between items-center max-w-[1000px] mx-auto">
        <span class="text-3xl">Ennytime</span>
        <nav class="flex gap-2 items-center">
            <ul class="flex items-center gap-4">
            {% if not current_user %}
                <a href="/">Home</a>
                <a href="/signup">Sign up</a>
                <a href="/signin">Sign in</a>
            {% else %}
                <li><a href="/">Calendar</a></li>
                <li><a href="/scheduling">Scheduling</a></li>
                <li><a href="/shifts">Shifts</a></li>
                <li hx-get="/unread"
                    hx-target="find div"
                    hx-swap="outerHTML"
                    hx-trigger="every 8s"
                    class="hidden md:block relative p-1">
                    {% if chat_data %}
                    <a href="/chat/{{chat_data['chatroom_id']}}"><img width="26"
                            height="26"
                            src="https://img.icons8.com/metro/26/chat.png"
                            alt="chat" /></a>
                    {% include "/chat/unread-counter.html" %}
                    {% else %}
                    <a href="/chat"><img width="26"
                            height="26"
                            src="https://img.icons8.com/metro/26/chat.png"
                            alt="chat" /></a>
                    {% endif %}
                </li>
                <li x-data="{dropdownOpen: false}" 
                    class="relative hidden md:block"
                    >
                    <button @click="dropdownOpen = !dropdownOpen" 
                            @click.away="dropdownOpen = false"
                            class="flex items-center gap-2 whitespace-nowrap cursor-pointer select-none">
                        {% if not current_user.display_name %}
                        New User
                        {% else %}
                        {{current_user.display_name}}
                        {% endif %}
                        <img class="w-4 h-4"
                            x-bind:class="dropdownOpen ? 'transform rotate-180 duration-200' : 'transform rotate-0 duration-100'"
                            src="https://img.icons8.com/small/32/777777/expand-arrow.png" />
                    </button>
                    {# <a href="/profile">Profile</a> #}
                    <div x-show="dropdownOpen"
                        x-cloak
                        class="absolute right-0 bg-white text-black shadow rounded-lg w-40 p-2 z-20"
                        x-transition:enter="duration-300 ease-out"
                        x-transition:enter-start="opacity-0 -translate-y-5 scale-90">
                        <ul>
                            <li class="grid rounded px-2 py-1 hover:bg-pink-200 cursor-pointer">
                                <a href="/profile"
                                class="w-full text-right">Profile</a>
                            </li>
                            {% if current_user.is_admin %}
                            <li class="grid text-right rounded px-2 py-1 hover:bg-pink-200 cursor-pointer">
                                <a href="/admin"
                                class="w-full">Admin</a>
                            </li>
                            {% endif%}
                            <li class="grid rounded px-2 py-1 hover:bg-pink-200 cursor-pointer">
                                <button hx-get="/signout"
                                        class="w-full text-end">Sign out</button>
                            </li>
                        </ul>
                    </div>
                </li>
            {% endif %}
            </ul>
        </nav>
    </div>

</header>