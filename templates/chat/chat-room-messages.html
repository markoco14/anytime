{% for message in messages  %}
{% if message.sender_id == user_data.id %}
<div class="flex justify-end">
	<div class="bg-pink-500 text-white p-3 rounded-lg max-w-[70%]">
		<p>{{message.message}}</p>
		<p class="text-xs text-gray-200 mt-1">{{message.created_at}}</p>
		{% if message.is_read %}
		<p class="text-xs text-gray-200">Read</p>
		{% else %}
		<p class="text-xs text-gray-200">Unread</p>
		{% endif %}
	</div>
</div>
{% else %}
<div class="flex">
	{% if not message.is_read %}
	<div hx-get="/read-status/{{message.id}}"
		 hx-trigger="intersect once threshold:0.2"
		 hx-swap="none"
		 class="bg-pink-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 p-3 rounded-lg max-w-[70%]">
		{% else %}
		<div class="bg-pink-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200 p-3 rounded-lg max-w-[70%]">
			{% endif %}
			<p>{{message.message}}</p>
			<p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
				{{message.created_at}}
			</p>
		</div>
	</div>
	{% endif %}
	{% endfor %}